{
  "id": "39eb0150-943d-462b-939d-323133aa99c4",
  "prevId": "4ad560f8-9748-47c9-aa0c-1d0aa7148e19",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.assets": {
      "name": "assets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "original_name": {
          "name": "original_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "meta_json": {
          "name": "meta_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "assets_client_id_clients_id_fk": {
          "name": "assets_client_id_clients_id_fk",
          "tableFrom": "assets",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "assets_brief_id_briefs_id_fk": {
          "name": "assets_brief_id_briefs_id_fk",
          "tableFrom": "assets",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.brief_versions": {
      "name": "brief_versions",
      "schema": "",
      "columns": {
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "diff_json": {
          "name": "diff_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brief_versions_brief_id_briefs_id_fk": {
          "name": "brief_versions_brief_id_briefs_id_fk",
          "tableFrom": "brief_versions",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "brief_versions_brief_id_version_pk": {
          "name": "brief_versions_brief_id_version_pk",
          "columns": [
            "brief_id",
            "version"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.briefs": {
      "name": "briefs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'draft'"
        },
        "objective": {
          "name": "objective",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "audience_id": {
          "name": "audience_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deadline_at": {
          "name": "deadline_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "briefs_client_id_clients_id_fk": {
          "name": "briefs_client_id_clients_id_fk",
          "tableFrom": "briefs",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.client_feature_toggle_audits": {
      "name": "client_feature_toggle_audits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "feature": {
          "name": "feature",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "previous_enabled": {
          "name": "previous_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "new_enabled": {
          "name": "new_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "actor": {
          "name": "actor",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "client_feature_toggle_audits_client_id_clients_id_fk": {
          "name": "client_feature_toggle_audits_client_id_clients_id_fk",
          "tableFrom": "client_feature_toggle_audits",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.client_features": {
      "name": "client_features",
      "schema": "",
      "columns": {
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "feature": {
          "name": "feature",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "client_features_client_id_clients_id_fk": {
          "name": "client_features_client_id_clients_id_fk",
          "tableFrom": "client_features",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "client_features_client_id_feature_pk": {
          "name": "client_features_client_id_feature_pk",
          "columns": [
            "client_id",
            "feature"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.client_profiles": {
      "name": "client_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "primary_communication_language": {
          "name": "primary_communication_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "objectives_json": {
          "name": "objectives_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "audiences_json": {
          "name": "audiences_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "tone_json": {
          "name": "tone_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "special_instructions_json": {
          "name": "special_instructions_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "guardrails_json": {
          "name": "guardrails_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "platform_prefs_json": {
          "name": "platform_prefs_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "permissions_json": {
          "name": "permissions_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "client_profiles_client_id_clients_id_fk": {
          "name": "client_profiles_client_id_clients_id_fk",
          "tableFrom": "client_profiles",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.clients": {
      "name": "clients",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "industry": {
          "name": "industry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "settings_json": {
          "name": "settings_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "clients_slug_unique": {
          "name": "clients_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_ingest_runs": {
      "name": "discovery_ingest_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "failure_reason": {
          "name": "failure_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "retry_in_minutes": {
          "name": "retry_in_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "metrics_json": {
          "name": "metrics_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "telemetry_json": {
          "name": "telemetry_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "discovery_ingest_runs_client_id_clients_id_fk": {
          "name": "discovery_ingest_runs_client_id_clients_id_fk",
          "tableFrom": "discovery_ingest_runs",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "discovery_ingest_runs_source_id_discovery_sources_id_fk": {
          "name": "discovery_ingest_runs_source_id_discovery_sources_id_fk",
          "tableFrom": "discovery_ingest_runs",
          "tableTo": "discovery_sources",
          "columnsFrom": [
            "source_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "discovery_ingest_runs_run_id_unique": {
          "name": "discovery_ingest_runs_run_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "run_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_item_status_history": {
      "name": "discovery_item_status_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "previous_status": {
          "name": "previous_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "next_status": {
          "name": "next_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "actor_id": {
          "name": "actor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "actor_name": {
          "name": "actor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "discovery_item_status_history_item_idx": {
          "name": "discovery_item_status_history_item_idx",
          "columns": [
            {
              "expression": "item_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "discovery_item_status_history_created_idx": {
          "name": "discovery_item_status_history_created_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "discovery_item_status_history_item_id_discovery_items_id_fk": {
          "name": "discovery_item_status_history_item_id_discovery_items_id_fk",
          "tableFrom": "discovery_item_status_history",
          "tableTo": "discovery_items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_items": {
      "name": "discovery_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_hash": {
          "name": "raw_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending_scoring'"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "fetched_at": {
          "name": "fetched_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "published_at": {
          "name": "published_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "published_at_source": {
          "name": "published_at_source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ingested_at": {
          "name": "ingested_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "raw_payload_json": {
          "name": "raw_payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "normalized_json": {
          "name": "normalized_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "source_metadata_json": {
          "name": "source_metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "discovery_items_client_hash_unique": {
          "name": "discovery_items_client_hash_unique",
          "columns": [
            {
              "expression": "client_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "raw_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "discovery_items_status_idx": {
          "name": "discovery_items_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "discovery_items_source_idx": {
          "name": "discovery_items_source_idx",
          "columns": [
            {
              "expression": "source_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "discovery_items_client_id_clients_id_fk": {
          "name": "discovery_items_client_id_clients_id_fk",
          "tableFrom": "discovery_items",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "discovery_items_source_id_discovery_sources_id_fk": {
          "name": "discovery_items_source_id_discovery_sources_id_fk",
          "tableFrom": "discovery_items",
          "tableTo": "discovery_sources",
          "columnsFrom": [
            "source_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "discovery_items_brief_id_briefs_id_fk": {
          "name": "discovery_items_brief_id_briefs_id_fk",
          "tableFrom": "discovery_items",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_keywords": {
      "name": "discovery_keywords",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "keyword": {
          "name": "keyword",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "keyword_alias": {
          "name": "keyword_alias",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "added_by": {
          "name": "added_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "discovery_keywords_client_id_clients_id_fk": {
          "name": "discovery_keywords_client_id_clients_id_fk",
          "tableFrom": "discovery_keywords",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "discovery_keywords_client_alias_unique": {
          "name": "discovery_keywords_client_alias_unique",
          "nullsNotDistinct": false,
          "columns": [
            "client_id",
            "keyword_alias"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_scores": {
      "name": "discovery_scores",
      "schema": "",
      "columns": {
        "item_id": {
          "name": "item_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "keyword_score": {
          "name": "keyword_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "recency_score": {
          "name": "recency_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "source_score": {
          "name": "source_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "applied_threshold": {
          "name": "applied_threshold",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "weights_version": {
          "name": "weights_version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "components_json": {
          "name": "components_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "rationale_json": {
          "name": "rationale_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "knobs_hint_json": {
          "name": "knobs_hint_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "status_outcome": {
          "name": "status_outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scored_at": {
          "name": "scored_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "discovery_scores_item_id_discovery_items_id_fk": {
          "name": "discovery_scores_item_id_discovery_items_id_fk",
          "tableFrom": "discovery_scores",
          "tableTo": "discovery_items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.discovery_sources": {
      "name": "discovery_sources",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "canonical_url": {
          "name": "canonical_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "identifier": {
          "name": "identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "config_json": {
          "name": "config_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "fetch_interval_minutes": {
          "name": "fetch_interval_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 60
        },
        "next_fetch_at": {
          "name": "next_fetch_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_fetch_started_at": {
          "name": "last_fetch_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_fetch_completed_at": {
          "name": "last_fetch_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_fetch_status": {
          "name": "last_fetch_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'idle'"
        },
        "last_failure_reason": {
          "name": "last_failure_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_success_at": {
          "name": "last_success_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "consecutive_failure_count": {
          "name": "consecutive_failure_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "health_json": {
          "name": "health_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "discovery_sources_client_identifier_lower_unique": {
          "name": "discovery_sources_client_identifier_lower_unique",
          "columns": [
            {
              "expression": "client_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "lower(\"identifier\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "discovery_sources_client_id_clients_id_fk": {
          "name": "discovery_sources_client_id_clients_id_fk",
          "tableFrom": "discovery_sources",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "discovery_sources_client_identifier_unique": {
          "name": "discovery_sources_client_identifier_unique",
          "nullsNotDistinct": false,
          "columns": [
            "client_id",
            "source_type",
            "identifier"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {}
    },
    "public.emails_ingested": {
      "name": "emails_ingested",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_event_id": {
          "name": "provider_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_id": {
          "name": "message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "from_email": {
          "name": "from_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "to_email": {
          "name": "to_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_url": {
          "name": "raw_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parsed_json": {
          "name": "parsed_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.examples_index": {
      "name": "examples_index",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "embedding": {
          "name": "embedding",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "meta_json": {
          "name": "meta_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "perf_json": {
          "name": "perf_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.experiments": {
      "name": "experiments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "policy": {
          "name": "policy",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "arm_json": {
          "name": "arm_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "result_json": {
          "name": "result_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "experiments_brief_id_briefs_id_fk": {
          "name": "experiments_brief_id_briefs_id_fk",
          "tableFrom": "experiments",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.flex_capabilities": {
      "name": "flex_capabilities",
      "schema": "",
      "columns": {
        "capability_id": {
          "name": "capability_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "input_traits_json": {
          "name": "input_traits_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "input_contract_json": {
          "name": "input_contract_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "output_contract_json": {
          "name": "output_contract_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "input_facets": {
          "name": "input_facets",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "ARRAY[]::text[]"
        },
        "output_facets": {
          "name": "output_facets",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "ARRAY[]::text[]"
        },
        "cost_json": {
          "name": "cost_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "preferred_models": {
          "name": "preferred_models",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "ARRAY[]::text[]"
        },
        "heartbeat_json": {
          "name": "heartbeat_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "registered_at": {
          "name": "registered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "flex_capabilities_status_idx": {
          "name": "flex_capabilities_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "flex_capabilities_last_seen_idx": {
          "name": "flex_capabilities_last_seen_idx",
          "columns": [
            {
              "expression": "last_seen_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "flex_capabilities_capability_id_pk": {
          "name": "flex_capabilities_capability_id_pk",
          "columns": [
            "capability_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.flex_plan_nodes": {
      "name": "flex_plan_nodes",
      "schema": "",
      "columns": {
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "node_id": {
          "name": "node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "capability_id": {
          "name": "capability_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "context_json": {
          "name": "context_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "output_json": {
          "name": "output_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "error_json": {
          "name": "error_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "flex_plan_nodes_status_idx": {
          "name": "flex_plan_nodes_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "flex_plan_nodes_run_id_flex_runs_run_id_fk": {
          "name": "flex_plan_nodes_run_id_flex_runs_run_id_fk",
          "tableFrom": "flex_plan_nodes",
          "tableTo": "flex_runs",
          "columnsFrom": [
            "run_id"
          ],
          "columnsTo": [
            "run_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "flex_plan_nodes_run_id_node_id_pk": {
          "name": "flex_plan_nodes_run_id_node_id_pk",
          "columns": [
            "run_id",
            "node_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.flex_runs": {
      "name": "flex_runs",
      "schema": "",
      "columns": {
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "objective": {
          "name": "objective",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "envelope_json": {
          "name": "envelope_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "schema_hash": {
          "name": "schema_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "result_json": {
          "name": "result_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "context_snapshot_json": {
          "name": "context_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "plan_version": {
          "name": "plan_version",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.hitl_requests": {
      "name": "hitl_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "thread_id": {
          "name": "thread_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "step_id": {
          "name": "step_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pending_node_id": {
          "name": "pending_node_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "origin_agent": {
          "name": "origin_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "payload_json": {
          "name": "payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "contract_summary_json": {
          "name": "contract_summary_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "operator_prompt": {
          "name": "operator_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "denial_reason": {
          "name": "denial_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metrics_json": {
          "name": "metrics_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "hitl_requests_run_id_orchestrator_runs_run_id_fk": {
          "name": "hitl_requests_run_id_orchestrator_runs_run_id_fk",
          "tableFrom": "hitl_requests",
          "tableTo": "orchestrator_runs",
          "columnsFrom": [
            "run_id"
          ],
          "columnsTo": [
            "run_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hitl_requests_brief_id_briefs_id_fk": {
          "name": "hitl_requests_brief_id_briefs_id_fk",
          "tableFrom": "hitl_requests",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.hitl_responses": {
      "name": "hitl_responses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "request_id": {
          "name": "request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response_type": {
          "name": "response_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "selected_option_id": {
          "name": "selected_option_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "freeform_text": {
          "name": "freeform_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved": {
          "name": "approved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "responder_id": {
          "name": "responder_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "responder_display_name": {
          "name": "responder_display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata_json": {
          "name": "metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "hitl_responses_request_id_hitl_requests_id_fk": {
          "name": "hitl_responses_request_id_hitl_requests_id_fk",
          "tableFrom": "hitl_responses",
          "tableTo": "hitl_requests",
          "columnsFrom": [
            "request_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.knob_experiments": {
      "name": "knob_experiments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "post_id": {
          "name": "post_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "format_type": {
          "name": "format_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hook_intensity": {
          "name": "hook_intensity",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "expertise_depth": {
          "name": "expertise_depth",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "length_level": {
          "name": "length_level",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "scan_density": {
          "name": "scan_density",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "assets_count": {
          "name": "assets_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "knob_experiments_client_id_clients_id_fk": {
          "name": "knob_experiments_client_id_clients_id_fk",
          "tableFrom": "knob_experiments",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "knob_experiments_post_id_posts_id_fk": {
          "name": "knob_experiments_post_id_posts_id_fk",
          "tableFrom": "knob_experiments",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "knob_experiments_brief_id_briefs_id_fk": {
          "name": "knob_experiments_brief_id_briefs_id_fk",
          "tableFrom": "knob_experiments",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.orchestrator_runs": {
      "name": "orchestrator_runs",
      "schema": "",
      "columns": {
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "plan_snapshot_json": {
          "name": "plan_snapshot_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"version\":0,\"steps\":[]}'::jsonb"
        },
        "step_history_json": {
          "name": "step_history_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "run_report_json": {
          "name": "run_report_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "hitl_state_json": {
          "name": "hitl_state_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"requests\":[],\"responses\":[],\"pendingRequestId\":null,\"deniedCount\":0}'::jsonb"
        },
        "execution_context_json": {
          "name": "execution_context_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "runner_metadata_json": {
          "name": "runner_metadata_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "pending_request_id": {
          "name": "pending_request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "orchestrator_runs_brief_id_briefs_id_fk": {
          "name": "orchestrator_runs_brief_id_briefs_id_fk",
          "tableFrom": "orchestrator_runs",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.post_metrics": {
      "name": "post_metrics",
      "schema": "",
      "columns": {
        "post_id": {
          "name": "post_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "impressions": {
          "name": "impressions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "reactions": {
          "name": "reactions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "comments": {
          "name": "comments",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "shares": {
          "name": "shares",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "clicks": {
          "name": "clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ctr": {
          "name": "ctr",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "see_more_expands": {
          "name": "see_more_expands",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "dwell_seconds_est": {
          "name": "dwell_seconds_est",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "is_boosted": {
          "name": "is_boosted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "post_metrics_post_id_posts_id_fk": {
          "name": "post_metrics_post_id_posts_id_fk",
          "tableFrom": "post_metrics",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "post_metrics_post_id_captured_at_pk": {
          "name": "post_metrics_post_id_captured_at_pk",
          "columns": [
            "post_id",
            "captured_at"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.post_telemetry": {
      "name": "post_telemetry",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "post_id": {
          "name": "post_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "knobs_json": {
          "name": "knobs_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "observables_json": {
          "name": "observables_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "derived_metrics_json": {
          "name": "derived_metrics_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "render_metrics_json": {
          "name": "render_metrics_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "post_telemetry_post_id_posts_id_fk": {
          "name": "post_telemetry_post_id_posts_id_fk",
          "tableFrom": "post_telemetry",
          "tableTo": "posts",
          "columnsFrom": [
            "post_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "post_telemetry_client_id_clients_id_fk": {
          "name": "post_telemetry_client_id_clients_id_fk",
          "tableFrom": "post_telemetry",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.posts": {
      "name": "posts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "brief_id": {
          "name": "brief_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "variant_id": {
          "name": "variant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content_json": {
          "name": "content_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "knobs_json": {
          "name": "knobs_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "knob_payload_json": {
          "name": "knob_payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "posts_client_id_clients_id_fk": {
          "name": "posts_client_id_clients_id_fk",
          "tableFrom": "posts",
          "tableTo": "clients",
          "columnsFrom": [
            "client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "posts_brief_id_briefs_id_fk": {
          "name": "posts_brief_id_briefs_id_fk",
          "tableFrom": "posts",
          "tableTo": "briefs",
          "columnsFrom": [
            "brief_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    },
    "public.tasks": {
      "name": "tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assignee_id": {
          "name": "assignee_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "due_at": {
          "name": "due_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "payload_json": {
          "name": "payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {}
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
