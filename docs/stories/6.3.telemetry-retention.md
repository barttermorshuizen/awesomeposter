# Story 6.3: Telemetry Persistence & Retention

## Status
Draft

## Story
**As the** discovery platform team,
**I want** to persist telemetry events for 180 days with retention controls,
**so that** we can analyze pilot performance and debug issues later.

## Acceptance Criteria
1. Telemetry events stored in durable datastore with schema supporting event type, payload, clientId, timestamp.
2. Retention job trims events older than 180 days while ensuring aggregate counts remain intact.
3. Storage pipeline handles backpressure without dropping events; metrics exposed for queue depth and write latency.
4. Documentation covers how to query telemetry for support requests.

## Tasks / Subtasks
- [ ] Design and implement telemetry storage schema/tables (AC 1).
- [ ] Build ingestion writer with buffering/backpressure handling (AC 3).
- [ ] Implement scheduled retention job with metrics and alerts (AC 2).
- [ ] Update documentation/runbook for support queries (AC 4).
- [ ] Write tests covering retention trimming and persistence under load (AC 1-3).

## Dev Notes
- Evaluate using existing logging infrastructure; ensure multi-tenant isolation.
- Provide configuration for retention period in case policy changes.

### Testing
- Load tests to validate write throughput and retention behavior.
- Unit tests verifying retention boundaries and aggregate preservation.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-03-29 | 0.1 | Draft for Epic: Telemetry & Reporting. | PM |

## Dev Agent Record
_Not yet worked._
