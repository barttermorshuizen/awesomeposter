# Story 10.9: Flex Human Social Post Preview & Approval Trigger

## Status
Draft

## Story
**As a** director responsible for final social approvals,  
**I want** the flex human task panel to render a combined social post preview,  
**so that** I can visually assess the composed deliverable.

**Dependencies:** Requires completion of Story 10.3 (flex human task surfaces shell) and Story 10.6 (post visual widget contract) so the task panel already renders facet-driven content. (`docs/stories/10.3.flex-human-task-surfaces.md`, `docs/stories/10.6.flex-human-post-visual-widget.md`)

## Acceptance Criteria
1. When a task node exposes both `post_copy` and `post_visual` (or the consolidated `post`) in the run context, the facet widget registry resolves a `social_post.preview` entry that renders a generic combined preview inside `FlexTaskPanel.vue`, presenting copy text beside associated visuals. (`docs/architecture/flex-agents-server.md#154-facet-driven-task-surfaces`, `docs/architecture/flex-agents-server/512-reference-facet-catalog.md#facet-post_copy`, `docs/architecture/flex-agents-server/512-reference-facet-catalog.md#facet-post_visual`, `docs/architecture/flex-agents-server/512-reference-facet-catalog.md#facet-post`)
2. Unit tests cover the widget rendering (copy + visuals)
6. Architecture documentation for facet-driven task surfaces is updated to describe the new `social_post.preview` registration.

## Tasks / Subtasks
- [ ] Register a `social_post.preview` widget in the facet widget registry and ensure the flex task panel resolves it when post copy/visual facets (or `post`) are present. (`src/components/flex-tasks/widgets/registry.ts`, `docs/architecture/flex-agents-server.md#154-facet-driven-task-surfaces`)
- [ ] Implement `SocialPostPreview.vue` (or equivalent) to render combined copy and visual thumbnails, leveraging existing post visual gallery utilities where possible. (`src/components/flex-tasks/widgets/`, `docs/architecture/source-tree.md#2-spa`)
- [ ] Add Vitest coverage for the widget
- [ ] Document the new widget mapping in the architecture docs under task surfaces. (`docs/architecture/flex-agents-server.md#154-facet-driven-task-surfaces`)

## Story Context
- Director review already consumes `post_copy`, `post_visual`, and emits the combined `post` facet; current UI shows these as separate raw facets. (`docs/architecture/flex-agents-server/11-capability-registry-agent-contracts.md#current-inventory`, `docs/architecture/flex-agents-server/512-reference-facet-catalog.md#facet-post`)
-
## Dev Notes
- Keep the preview layout intentionally simple (single-column copy plus image stack) to stay within scope; future stories can add channel-specific frames. (`docs/stories/10.3.flex-human-task-surfaces.md`)
- Reuse existing thumbnail helpers from `post_visual` widgets to avoid duplicating asset fetch logic. (`docs/stories/10.6.flex-human-post-visual-widget.md`)

## Testing
- `npm run test:unit`

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-04-14 | 0.1 | Initial draft defining social post preview widget and HITL approval bridge. | Product Owner |
| 2025-04-14 | 0.2 | Removed hitl - not in this story. | Product Owner |

## Dev Agent Record

### Agent Model Used
- _Not yet assigned_

### Debug Log References
- _Not yet assigned_

### Completion Notes List
- _Not yet recorded_

### File List
- _None yet_

## QA Results

_Not yet reviewed. QA to update this section only._
