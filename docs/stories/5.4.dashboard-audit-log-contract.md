# Story 5.4: Bulk Action Audit Logging Contract

## Status
Draft

## Story
**As a** platform architect,
**I want** a documented contract for how bulk brief actions are logged across backend and UI,
**so that** audit trails stay consistent and downstream consumers can rely on a single schema.

## Acceptance Criteria
1. Contract document enumerates required fields for every bulk action log entry (acting user, timestamp, action type, affected brief IDs, note/reason, source context).
2. Contract specifies storage location (table/column names) and retention expectations agreed with analytics (initially indefinite with URL source references only).
3. API requirements clarify how audit metadata is returned to clients (list endpoint shape, pagination) and how new entries are surfaced via SSE.
4. UI requirements cover how audit history is displayed in the brief detail drawer, including grouping and timestamp formatting.
5. Story outputs actionable tasks for implementing API, persistence, and UI changes, referenced by other stories (5.3, telemetry) without duplication.

## Tasks / Subtasks
- [ ] Draft audit logging schema proposal aligned with existing `discovery_metrics` / new table options.
- [ ] Review proposal with backend + analytics stakeholders; capture decisions in architecture docs.
- [ ] Update backend architecture doc once schema is ratified.
- [ ] Define UI presentation specs (table placement, filters) and feed into dashboard implementation notes.
- [ ] Provide follow-up stories or acceptance criteria updates for API/UI build tasks.

## Dev Notes
- Preference is to reuse existing `discovery_metrics` aggregation path; consider introducing `discovery_audit_log` table if fields exceed current schema.
- Ensure contract covers undo/rollback scenarios from Story 5.3, including how reversals are recorded.

### Testing
- N/A (documentation/story scoping effort) â€” acceptance is contract sign-off.

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-03-30 | 0.1 | Initial draft aligning with architecture decisions. | Winston (Architect) |

## Dev Agent Record
_Not yet worked._
